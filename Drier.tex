\pgfkeys{ % Height ratio acts weirdly due to use in code. Checking required
        /drier/dimension/height/.code = {#1},
        /drier/dimension/height/.initial = 3 cm,
        /drier/dimension/height ratio/.code = {#1},
        /drier/dimension/height ratio/.initial =  0.6,
        /drier/dimension/width bottom/.code = {#1},
        /drier/dimension/width bottom/.initial = 2 cm,
        /drier/dimension/width top/.code = {#1},
        /drier/dimension/width top/.initial = 1.5 cm,
        /drier/.is choice,
        /drier/basic/.code = {#1},
        /drier/basic/.initial = {},
        /drier/.default = {\pgfkeys{/drier/basic}},
        /drier/oven/.code = {
            \pgfkeys{/drier/basic/.append code = {
                \centerpoint

                \pgfpointscale{0.6}{\pgfpoint{\pgfkeysvalueof{/drier/dimension/width top}}{0}}
                \pgfpointscale{0.5}{\pgfpoint{\pgf@x}{0}}
                \pgf@xa = \pgf@x
                
                \pgfpointscale{0.1}{\pgfpoint{0}{\pgfkeysvalueof{/drier/dimension/height}}}
                \pgf@ya = \pgf@y

                \foreach \j in {1, 2, 3} {
                    \pgfpointscale{\j}{\pgfpoint{0}{\pgf@ya}}
                    \pgfpathmoveto{\pgfpoint{-\pgf@xa}{\pgf@y}}
                    \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@y}}
                }
            }
        }},
        /drier/turbo/.code = {
            \pgfkeys{/drier/basic/.append code = {
                \pgfpointscale{0.2}{\east}
                \pgf@xa = \pgf@x
                
                \pgfpointscale{0.15}{\north}
                \pgf@ya = \pgf@y

                \pgfpathmoveto{\pgfpoint{-2 \pgf@xa}{\pgf@ya}}
                \pgfpathlineto{\pgfpoint{2 \pgf@xa}{\pgf@ya}}

                \east
                \pgfpathmoveto{\pgfpoint{- \pgf@x}{2 \pgf@ya}}
                \pgfpathlineto{\pgfpoint{-1.5 \pgf@xa}{2 \pgf@ya}}

                \east
                \pgfpathmoveto{\pgfpoint{\pgf@x}{2 \pgf@ya}}
                \pgfpathlineto{\pgfpoint{1.5 \pgf@xa}{2 \pgf@ya}}

                \pgfpathmoveto{\pgfpoint{-2 \pgf@xa}{3 \pgf@ya}}
                \pgfpathlineto{\pgfpoint{2 \pgf@xa}{3 \pgf@ya}}

                \pgfpathmoveto{\pgfpoint{0}{\pgf@ya}}
                \pgfpathlineto{\north}
            }
        }},
        /drier/fluidized bed/.code = {
            \pgfkeys{/drier/basic/.append code = {
                \east
                \pgf@xa = \pgf@x
                
                \pgfpointscale{0.12}{\north}
                \pgf@ya = \pgf@y
                
                \pgfpathmoveto{\pgfpoint{- \pgf@xa}{\pgf@ya}}
                \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}

                \pgfusepath{stroke}
                
                \foreach \j in {-0.75, -0.25, 0.25, 0.75} {
                    \pgfpointscale{\j}{\pgfpoint{\pgf@xa}{0}}
                    \pgfpathcircle{\pgfpoint{\pgf@x}{2 \pgf@ya}}{1 pt}
                }
                
                \foreach \j in {-0.5, 0, 0.5} {
                    \pgfpointscale{\j}{\pgfpoint{\pgf@xa}{0}}
                    \pgfpathcircle{\pgfpoint{\pgf@x}{3 \pgf@ya}}{1 pt}
                }
                \pgfusepath{fill}
                
                \pgfpathmoveto{\pgfpoint{- \pgf@xa}{4 \pgf@ya}}
                \pgfpathlineto{\pgfpoint{\pgf@xa}{4 \pgf@ya}}
            }
        }},
        /drier/spray/.code = {
            \pgfkeys{/drier/basic/.append code = {
                \north
                \pgf@ya = 0.85 \pgf@y

                \pgf@xa = 0.2 cm

                \pgfpathmoveto{\north}
                \pgfpathlineto{\pgfpoint{-\pgf@xa}{\pgf@ya}}
                \pgfpathmoveto{\north}
                \pgfpathlineto{\pgfpoint{0}{\pgf@ya}}
                \pgfpathmoveto{\north}
                \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@ya}}
            }
        }},
        /drier/belt/.code = {
            \pgfkeys{/drier/basic/.append code = {
                \north
                \pgf@ya = 0.3 \pgf@y

                \east
                \pgf@xa = 0.4 \pgf@x
                \pgf@xb = 0.15 cm

                \north
                \pgf@yb = 0.1 \pgf@y

                \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
                \pgfpatharc{90}{450}{\pgf@xb}
                \pgfpathlineto{\pgfpoint{-\pgf@xa}{\pgf@ya}}
                \pgfpatharc{90}{450}{\pgf@xb}

                \pgfpathmoveto{\pgfpoint{-\pgf@xa}{\pgf@yb}}
                \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
            }
        }},
        /drier/rotary/.code = {
            \pgfkeys{/drier/basic/.append code = {
                \north
                \pgf@ya = 0.3 \pgf@y
                \pgf@yb = 0.8 \pgf@y

                \east 
                \pgf@xa = 0.5 \pgf@x
                \pgf@xb = 0.8 \pgf@x
                
                \pgfpathmoveto{\pgfpoint{0}{\pgf@yb}}
                \pgfpatharc{90}{45}{\pgf@xb}
                \pgfpatharc{45}{135}{\pgf@xb}
                
                \pgfpathcircle{\pgfpoint{0}{\pgf@ya}}{\pgf@xa}
            }
        }}
}

\pgfdeclareshape{drier}{
    \savedanchor{\centerpoint}{\pgfpointorigin}
    \savedanchor{\east}{
        \pgfpointscale{0.5}{\pgfpoint{\pgfkeysvalueof{/drier/dimension/width bottom}}{0}}
    }
    \savedanchor{\north}{
        \pgfpointscale{0.5}{\pgfpoint{0}{\pgfkeysvalueof{/drier/dimension/height}}}
    }
    \savedanchor{\eastnorth}{
        \pgfpoint{\pgfkeysvalueof{/drier/dimension/height ratio}}{0}
        \pgf@xa = \pgf@x
        \pgfpointscale{0.5}{\pgfpoint{0}{\pgfkeysvalueof{/drier/dimension/height}}} % Same as \north
        \pgfpointscale{\pgf@xa}{\pgfpoint{\pgf@x}{\pgf@y}}
        \pgf@ya = \pgf@y
        \pgfpointscale{0.5}{\pgfpoint{\pgfkeysvalueof{/drier/dimension/width bottom}}{0}}
        \pgf@y = \pgf@ya
    }
    \savedanchor{\northeast}{
         \pgfpointscale{0.5}{\pgfpoint{\pgfkeysvalueof{/drier/dimension/width top}}{\pgfkeysvalueof{/drier/dimension/height}}}
    }
    

    \anchor{center}{\centerpoint}
    \anchor{east}{\east}
    \anchor{north}{\north}
    \anchor{west}{
        \east 
        \pgf@x = -\pgf@x
    }
    \anchor{south}{
        \north
        \pgf@y = -\pgf@y
    }


    \backgroundpath{
        \pgfpathmoveto{\east}
        \pgfpathlineto{\eastnorth}
        \pgfpathlineto{\northeast}
        
        \northeast
        \pgfpathlineto{\pgfpoint{-\pgf@x}{\pgf@y}}
        \eastnorth
        \pgf@xa = \pgf@x
        \pgfpathlineto{\pgfpoint{-\pgf@x}{\pgf@y}}

        \north
        \pgfpathlineto{\pgfpoint{-\pgf@xa}{-\pgf@y}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@y}}
        \pgfpathclose
        
        \pgfkeys{/drier/basic}
        
        \pgfusepath{stroke}
    }
}